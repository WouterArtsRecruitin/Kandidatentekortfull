# Render Blueprint - Kandidatentekort Auto
# Deploy: https://render.com/deploy
# Docs: https://render.com/docs/blueprint-spec

services:
  - type: web
    name: kandidatentekort-api
    runtime: python
    region: frankfurt  # EU region for Dutch users
    plan: starter  # $7/month - upgrade to standard for production

    # Build settings
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn --bind 0.0.0.0:$PORT --workers 2 --timeout 120 "kandidatentekort_auto:create_app()"

    # Health check
    healthCheckPath: /health

    # Environment variables (set via Render Dashboard)
    envVars:
      - key: PYTHON_VERSION
        value: "3.11"
      - key: CLAUDE_API_KEY
        sync: false  # Set manually in dashboard
      - key: PIPEDRIVE_API_KEY
        sync: false
      - key: SMTP_HOST
        value: smtp.gmail.com
      - key: SMTP_PORT
        value: "587"
      - key: SMTP_USER
        sync: false
      - key: SMTP_PASSWORD
        sync: false

    # Auto-deploy on push to main
    autoDeploy: true

    # Branch to deploy from
    branch: main
